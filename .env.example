# N8N Web工作流平台 - 环境变量配置示例
# 复制此文件为 .env 并根据您的环境修改配置

# ===========================================
# 基础配置
# ===========================================

# 环境模式 (development | production | test)
NODE_ENV=production

# 应用端口配置
FRONTEND_PORT=3000
BACKEND_PORT=8000
MCP_PORT=9000

# 应用URL配置
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:8000
MCP_URL=http://localhost:9000

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL配置
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=n8n_platform
POSTGRES_USER=n8n_platform
POSTGRES_PASSWORD=your_secure_postgres_password

# 数据库连接URL (Prisma使用)
DATABASE_URL=postgresql://n8n_platform:your_secure_postgres_password@localhost:5432/n8n_platform

# ===========================================
# Redis配置
# ===========================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password
REDIS_DB=0

# Redis连接URL
REDIS_URL=redis://:your_secure_redis_password@localhost:6379/0

# ===========================================
# 安全配置
# ===========================================

# JWT密钥 (请使用强密码)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# 会话密钥
SESSION_SECRET=your-session-secret-key

# 加密密钥
ENCRYPTION_KEY=your-32-character-encryption-key

# ===========================================
# N8N配置
# ===========================================

# N8N实例配置
N8N_HOST=localhost
N8N_PORT=5679
N8N_PROTOCOL=http
N8N_API_URL=http://localhost:5679

# N8N认证配置
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=your_n8n_password

# N8N Webhook配置
N8N_WEBHOOK_URL=http://localhost:5679

# ===========================================
# Docker配置
# ===========================================

# Docker Socket路径
DOCKER_SOCKET_PATH=/var/run/docker.sock

# Docker网络
DOCKER_NETWORK=n8n-platform-network

# ===========================================
# MCP服务配置
# ===========================================

# MCP服务器配置
MCP_SERVER_HOST=localhost
MCP_SERVER_PORT=9000

# N8N MCP服务器路径
N8N_MCP_SERVER_PATH=./mcp-integration/n8n-mcp-server

# 工作流库路径
WORKFLOW_LIBRARY_PATH=./mcp-integration/data/workflows

# ===========================================
# AI服务配置
# ===========================================

# OpenAI配置
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Anthropic配置 (可选)
ANTHROPIC_API_KEY=your_anthropic_api_key

# Cohere配置 (可选)
COHERE_API_KEY=your_cohere_api_key

# ===========================================
# 邮件服务配置
# ===========================================

# SMTP配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_email_password

# 发件人信息
MAIL_FROM_NAME=N8N Platform
MAIL_FROM_ADDRESS=noreply@your-domain.com

# ===========================================
# 文件存储配置
# ===========================================

# 上传文件配置
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain

# 文件存储路径
UPLOAD_PATH=./uploads
TEMP_PATH=./temp

# ===========================================
# 日志配置
# ===========================================

# 日志级别 (error | warn | info | debug)
LOG_LEVEL=info

# 日志文件路径
LOG_PATH=./logs

# 日志文件最大大小 (MB)
LOG_MAX_SIZE=100

# 日志文件保留天数
LOG_MAX_FILES=30

# ===========================================
# 监控配置
# ===========================================

# Prometheus配置
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafana配置
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password

# 健康检查配置
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ===========================================
# 缓存配置
# ===========================================

# 缓存TTL (秒)
CACHE_TTL=3600

# 节点类型缓存TTL
NODE_TYPES_CACHE_TTL=7200

# 工作流模板缓存TTL
TEMPLATES_CACHE_TTL=1800

# ===========================================
# 速率限制配置
# ===========================================

# API速率限制 (请求/分钟)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# 上传速率限制
UPLOAD_RATE_LIMIT=10

# ===========================================
# WebSocket配置
# ===========================================

# Socket.IO配置
SOCKET_IO_CORS_ORIGIN=http://localhost:3000
SOCKET_IO_TRANSPORTS=websocket,polling

# 连接超时 (毫秒)
SOCKET_TIMEOUT=30000

# ===========================================
# 开发配置
# ===========================================

# 开发模式配置
DEV_MODE=false
DEBUG_MODE=false

# 热重载配置
HOT_RELOAD=true

# API文档配置
API_DOCS_ENABLED=true
API_DOCS_PATH=/api/docs

# ===========================================
# 生产配置
# ===========================================

# HTTPS配置
HTTPS_ENABLED=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# 域名配置
DOMAIN=localhost
SUBDOMAIN=n8n-platform

# CDN配置
CDN_URL=https://cdn.your-domain.com

# ===========================================
# 备份配置
# ===========================================

# 数据库备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ===========================================
# 第三方集成配置
# ===========================================

# GitHub集成 (可选)
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# Google集成 (可选)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Slack集成 (可选)
SLACK_BOT_TOKEN=your_slack_bot_token
SLACK_SIGNING_SECRET=your_slack_signing_secret

# ===========================================
# 性能配置
# ===========================================

# 数据库连接池
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis连接池
REDIS_POOL_MIN=1
REDIS_POOL_MAX=5

# 工作进程数
WORKER_PROCESSES=4

# 内存限制 (MB)
MEMORY_LIMIT=512

# ===========================================
# 安全头配置
# ===========================================

# CORS配置
CORS_ORIGIN=http://localhost:3000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# CSP配置
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'

# ===========================================
# 特性开关
# ===========================================

# 功能开关
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_REAL_TIME_COLLABORATION=true
FEATURE_WORKFLOW_TEMPLATES=true
FEATURE_DOCKER_INTEGRATION=true
FEATURE_MCP_INTEGRATION=true
FEATURE_MONITORING=true
FEATURE_BACKUP=true

# 实验性功能
EXPERIMENTAL_FEATURES=false
